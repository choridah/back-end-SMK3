nodemon src/scripts/index.js

bcrypt cookie-parser cors dotenv express jsonwebtoken mysql2 sequelize

import express from "express";
import dotenv from "dotenv";
import cookieParser from "cookie-parser";
import cors from "cors";
import db from "../config/Database.js";
import router from "../routes/UserRoutes.js";
import Users from "../models/UserModel.js"; // CARA 1: Membuat Tabel users dengan sequelize
//const cors = require('cors');
dotenv.config();
const app = express();

try{
    await db.authenticate();
    console.log('Database Connected ...');
    await Users.sync(); //
} catch(error) {
    console.error(error);
}

app.use(
    cors(
        { 
            credentials: true, 
            origin: 'http://server.greskit.com:3000/reactjs/smk3'
        }
    )
);

// app.use(cors())
// const corsOptions ={
//     origin:'http://server.greskit.com:3000/reactjs/smk3', 
//     credentials:true,            //access-control-allow-credentials:true
//     optionSuccessStatus:200
// }
// app.use(cors(corsOptions));

// app.use(cors())
// router.get("/", (req, res) => {
// res.setHeader("Access-Control-Allow-Origin", "*")
// res.setHeader("Access-Control-Allow-Credentials", "true");
// res.setHeader("Access-Control-Max-Age", "1800");
// res.setHeader("Access-Control-Allow-Headers", "content-type");
// res.setHeader( "Access-Control-Allow-Methods", "PUT, POST, GET, DELETE, PATCH, OPTIONS" ); 
 // });

app.use(cookieParser()); // mengambil value from cookie
app.use(express.json()); // save format json
app.use(router); // sebagai middleware

app.listen(5000, () => console.log('Server running at port 5000'));

/////////
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh
